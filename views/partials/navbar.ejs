<header class="navbar">
  <div class="navbar-container">
    <!-- Bên trái: Logo -->
    <div class="navbar-left">
      <a href="/" class="navbar-brand">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="icon"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
          />
        </svg>
        <span>Perfume Bliss</span>
      </a>
    </div>

    <!-- Bên phải: Menu -->
    <div class="navbar-right">
      <ul class="menu">
        <li><a href="/">Trang chủ</a></li>

        <% if (user && user.isAdmin) { %>
        <li><a href="/admin/dashboard" class="admin-link">Admin Panel</a></li>
        <% } %> <% if (user) { %>
        <li class="dropdown">
          <button class="dropdown-btn" id="userDropdownBtn">
            👋 Chào, <%= user.name.split(' ')[0] %>
            <span class="caret">▼</span>
          </button>
          <ul class="dropdown-menu" id="userDropdownMenu">
            <li><a href="/member/profile">Hồ sơ của tôi</a></li>
            <% if (user.isAdmin) { %>
            <li><a href="/admin/dashboard">Dashboard Admin</a></li>
            <% } %>
            <li class="logout"><a href="/auth/logout">Đăng xuất</a></li>
          </ul>
        </li>
        <% } else { %>
        <li><a href="/auth/login" class="btn-login">Đăng nhập</a></li>
        <li><a href="/auth/register" class="btn-register">Đăng ký</a></li>
        <% } %>
      </ul>
    </div>
  </div>
</header>

<script>
  // Dropdown toggle
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("userDropdownBtn");
    const menu = document.getElementById("userDropdownMenu");

    if (btn && menu) {
      btn.addEventListener("click", (e) => {
        e.stopPropagation();
        menu.classList.toggle("show");
      });

      document.addEventListener("click", (e) => {
        if (!menu.contains(e.target)) {
          menu.classList.remove("show");
        }
      });
    }
  });
</script>
