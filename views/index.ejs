<div class="container mx-auto px-4 py-8">
  <div class="flex flex-col md:flex-row justify-between items-center mb-6">
    <h2 class="text-3xl font-bold mb-4 md:mb-0 text-primary">
      Bộ sưu tập Nước hoa
    </h2>

    <form
      action="/"
      method="GET"
      class="flex flex-col sm:flex-row gap-3 w-full md:w-auto md:min-w-[70%]"
    >
      <label class="input input-bordered flex items-center gap-2 flex-grow">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 16 16"
          fill="currentColor"
          class="w-4 h-4 opacity-70"
        >
          <path
            fill-rule="evenodd"
            d="M9.965 11.524a5.25 5.25 0 1 1 1.06-1.06l2.094 2.093a.75.75 0 0 1-1.06 1.06l-2.094-2.093ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z"
            clip-rule="evenodd"
          />
        </svg>
        <input
          type="text"
          name="search"
          placeholder="Tìm theo tên nước hoa..."
          class="grow"
          value="<%= typeof search !== 'undefined' ? search : '' %>"
        />
      </label>

      <select
        name="brand"
        class="select select-bordered w-full sm:w-1/3 min-w-[150px]"
      >
        <option value="">Lọc theo Thương hiệu</option>
      </select>

      <button type="submit" class="btn btn-primary w-full sm:w-auto">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
          />
        </svg>
      </button>
    </form>
  </div>

  <hr class="mb-8 border-t border-base-300" />

  <div
    class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
  >
    <% if (perfumes && perfumes.length > 0) { %> <% perfumes.forEach(perfume =>
    { %>
    <div
      class="card bg-base-100 border border-base-300 shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 ease-in-out"
    >
      <div class="card-body p-6">
        <h3 class="card-title text-2xl font-bold mb-1 text-primary">
          <%= perfume.perfumeName %>
        </h3>

        <p class="text-base text-base-content">
          Thương hiệu:
          <span class="font-bold text-accent"
            ><%= perfume.brand.brandName %></span
          >
        </p>
        <p class="text-base text-base-content mb-3">
          Đối tượng:
          <span class="font-bold text-info"><%= perfume.targetAudience %></span>
        </p>

        <div class="mt-2 mb-3">
          <% if (perfume.concentration === 'Extrait') { %>
          <div
            class="badge badge-lg badge-secondary font-bold text-base-100 p-3"
          >
            ✨ Extrait - Cực phẩm ✨
          </div>
          <% } else { %>
          <div class="badge badge-outline"><%= perfume.concentration %></div>
          <% } %>
        </div>

        <div class="mt-4 pt-4 border-t border-base-200 flex flex-col gap-3">
          <p class="text-3xl font-extrabold text-success">
            <%= perfume.price.toLocaleString('vi-VN') %> VNĐ
          </p>
          <a
            href="/perfumes/<%= perfume._id %>"
            class="btn btn-warning btn-block"
            >Xem chi tiết</a
          >
        </div>
      </div>
    </div>
    <% }) %> <% } else { %>
    <div class="col-span-full">
      <div role="alert" class="alert alert-info">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          class="stroke-current shrink-0 w-6 h-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          ></path>
        </svg>
        <span>Không tìm thấy nước hoa nào phù hợp với tiêu chí tìm kiếm.</span>
      </div>
    </div>
    <% } %>
  </div>
</div>
